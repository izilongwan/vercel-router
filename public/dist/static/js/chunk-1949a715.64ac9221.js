(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1949a715"],{"1e95":function(e,t,n){"use strict";n("d102")},a55b:function(e,t,n){"use strict";n.r(t);var r={name:"LoginHeader"},a=n("2877"),s=Object(a.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("van-nav-bar",{attrs:{"left-text":"注册"}})}),[],!1,null,null,null).exports,o=n("3835"),i=n("1da1"),c=n("5530"),u=(n("96cf"),n("498a"),n("c24f")),l=n("f121"),f=n("b893"),d=n("4431"),p=n("2f62"),m={data:function(){return{isLoading:!1,phone:"",password:"",rules:{password:[{required:!0,message:"请填写密码"},{validator:function(e){if(e=e.trim()){var t=e.length;return t>=6&&t<=20}return!1},message:"密码长度为6-20位"}],phone:[{required:!0,message:"请填写手机号"},{validator:function(e){return!!(e=e.trim())&&11===e.length},message:"手机为11位数字"},{validator:function(e){e=e.trim();return/^1[3-9]\d{9}$/.test(e)},message:"手机号不合法"}]}}},activated:function(){this.resetForm()},methods:Object(c.a)(Object(c.a)(Object(c.a)({},Object(p.b)("user",["SetUser"])),Object(p.b)("music",["SetMusicList"])),{},{onSubmit:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var r,a,s,i,c,d,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isLoading=!0,n.next=3,f.a.asyncFunc((function(){return Object(u.c)(e)}));case 3:if(r=n.sent,a=Object(o.a)(r,2),s=a[0],i=a[1],!s){n.next=10;break}return t.$toast.fail(l.SERVER_ERROR),n.abrupt("return");case 10:c=i.code,d=i.profile,p=i.msg,t.getData(d),d&&localStorage.setItem(l.TOKEN_NAME,JSON.stringify(d)),200===c&&t.$router.push("recom"),t.$toast({message:p||"success",position:"top"}),t.isLoading=!1;case 16:case"end":return n.stop()}}),n)})))()},getData:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var r,a,s,i,c,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=17;break}return n.next=3,t.SetUser(e);case 3:return n.next=5,f.a.asyncFunc(d.a);case 5:if(r=n.sent,a=Object(o.a)(r,2),s=a[0],i=a[1],!s){n.next=12;break}return t.$toast.fail(l.SERVER_ERROR),n.abrupt("return");case 12:if(!s){n.next=15;break}return t.$toast.fail(l.SERVER_ERROR),n.abrupt("return");case 15:i.msg,c=i.code,u=i.data,0===c&&t.SetMusicList(u);case 17:case"end":return n.stop()}}),n)})))()},resetForm:function(){this.phone="",this.password="",this.$refs.form.resetValidation()}})},b={name:"Login",components:{LoginHeader:s,LoginForm:Object(a.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-form",{ref:"form",staticClass:"form",on:{submit:e.onSubmit}},[n("van-field",{attrs:{"left-icon":"phone-o",name:"phone",label:"手机",maxlength:"11",placeholder:"请输入手机号",clickable:"",clearable:"",rules:e.rules.phone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),n("van-field",{attrs:{"left-icon":"closed-eye",type:"password",maxlength:"20",clearable:"",clickable:"",name:"password",label:"密码",placeholder:"请输入密码",rules:e.rules.password},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",loading:e.isLoading,color:"linear-gradient(to right, #4bb0ff, #6149f6)","native-type":"submit"}},[e._v("登 录")])],1)],1)}),[],!1,null,null,null).exports}},h=(n("1e95"),Object(a.a)(b,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("LoginHeader"),t("LoginForm")],1)}),[],!1,null,"4dea7d98",null));t.default=h.exports},c24f:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n("b775"),a=n("da71"),s=function(e){return Object(r.a)({url:a.a.USER_REGISTER,method:"post",data:e})},o=function(e){return Object(r.a)({url:a.a.USER_LOGIN,method:"post",data:e})},i=function(e){return Object(r.a)({url:a.a.USER_CAPTCHA_SEND,method:"get",params:{phone:e}})},c=function(e){var t=e.phone,n=e.captcha;return Object(r.a)({url:a.a.USER_CAPTCHA_VERIFY,method:"get",params:{phone:t,captcha:n}})}},d102:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1949a715.64ac9221.js.map