(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f8bec584"],{1102:function(t,a,e){},"1a33":function(t,a,e){"use strict";e.r(a);var i=e("3835"),n=e("1da1"),s=(e("96cf"),e("a9e3"),e("b0c0"),e("a4d3"),e("e01a"),e("d81d"),e("a15b"),e("d07a")),r=(e("b680"),{name:"ListBanner",props:{banner:Object}}),c=(e("ff39"),e("2877")),l=Object(c.a)(r,(function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"banner"},[a("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img"},expression:"{selector: 'img'}"}],staticClass:"img-wrap"},[a("img",{attrs:{height:"100%","data-src":this.banner.coverImgUrl,alt:"Cover"}})]),a("div",{staticClass:"cover"},[a("van-icon",{staticClass:"icon",attrs:{name:"like-o"}})],1),a("p",{staticClass:"desc"},[this._v(this._s(this.banner.description))])])}),[],!1,null,"5771ec53",null).exports,o=e("e7bd"),u=e("b893"),d=e("bd00"),h=e("5530"),f=(e("7db0"),e("2f62")),m={name:"ListFunc",props:{list:Array,banner:Object},data:function(){return{isPlaying:!1}},computed:Object(h.a)(Object(h.a)({},Object(f.c)("music",["musicList"])),{},{isCollected:function(){var t=this.musicList,a=this.banner.id;return t.artists.find((function(t){return t.id==a}))}}),methods:{onPlayingAll:function(){var t=this.list,a=this.$bus,e=this.isPlaying,i=t[0].id;if(e)return a.$emit("handleMusicState",!1),void(this.isPlaying=!1);a.$emit("handleMusic",{id:i,playings:t,type:"recents"}),a.$emit("handleMusicState",!0),this.isPlaying=!0}}},p=(e("46b8"),Object(c.a)(m,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"func"},[e("div",{staticClass:"cell",on:{click:t.onPlayingAll}},[e("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.isPlaying,expression:"!isPlaying"}],staticClass:"icon",attrs:{name:"play-circle-o"}}),e("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}],staticClass:"icon",attrs:{name:"pause-circle-o"}}),e("em",{staticClass:"text"},[t._v("\n      全部播放\n      "),e("span",{staticClass:"total"},[t._v("(共"+t._s(t.list.length)+"首)")])])],1),t.banner.playCount?e("div",{staticClass:"cell",class:{collect:t.isCollected},on:{click:function(a){return t.$bus.$emit("handleMusicCollectData",{music:t.banner,type:"artists"})}}},[e("van-icon",{staticClass:"icon",attrs:{name:t.isCollected?"like-o":"add-o"}}),e("em",{staticClass:"text"},[t._v("\n      "+t._s(t.isCollected?"已收藏":"未收藏")+"\n      "),e("span",{staticClass:"total"},[t._v("("+t._s(Math.floor(t.banner.playCount/1e4))+"万)")])])],1):t._e()])}),[],!1,null,"1de95086",null).exports),b={name:"ListContent",props:{data:Object,headerObj:Object},components:{ListBanner:l,Scroll:o.a,SongList:d.a,ListFunc:p},methods:{scrollAction:u.a._throttle((function(t){var a=-t.y,e=this.headerObj,i=this.data.banner.name,n=((a+500)/500-1).toFixed(2),s="歌单";n<=.01?s="歌单":n>1?(n=1,s=i):n>=.4&&(s=i),e.opacity=n,e.title=s}),500)}},v=Object(c.a)(b,(function(){var t=this.$createElement,a=this._self._c||t;return a("Scroll",{staticClass:"bt-5",attrs:{isScrollToTop:!0,scrollAction:this.scrollAction}},[a("ListBanner",{attrs:{banner:this.data.banner}}),a("ListFunc",{attrs:{list:this.data.list,banner:this.data.banner}}),a("SongList",{attrs:{artist:this.data.banner,field:"recents",list:this.data.list}})],1)}),[],!1,null,null,null).exports,g=e("ee87"),y=e("b775"),C=e("da71"),_=function(t){return Object(y.a)({url:C.a.PLAYLIST_DETAIL_GET,method:"get",params:{id:t}})},S=e("7f5c"),j=e("f121"),O={name:"List",props:{type:String,id:[String,Number]},components:{ListHeader:s.a,ListContent:v,Loading:g.a},data:function(){return{isLoadingShow:!0,cache:{},data:{banner:{},list:[]},headerObj:{title:"歌单",opacity:.2}}},activated:function(){this.checkCache()},methods:{checkCache:function(){var t=this.type,a=this.id,e=this.cache,i=this.headerObj;if(this.isLoadingShow=!0,this.data={},i.opacity=.2,!e[t]&&(e[t]={}),e[t][a])return this.data=e[t][a],this.isLoadingShow=!1,void(i.opacity=0);this.getData({type:t,id:a})},getData:function(t){var a=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var n,s,r,c,l,o,d,h,f,m,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,s=t.id,e.t0=n,e.next="play"===e.t0?4:"singer"===e.t0?16:26;break;case 4:return e.next=6,u.a.asyncFunc((function(){return _(s)}));case 6:if(r=e.sent,c=Object(i.a)(r,2),l=c[0],o=c[1],!l){e.next=13;break}return a.$toast.fail(j.SERVER_ERROR),e.abrupt("return");case 13:return d=o.playlist,a.formatPlaylist(d),e.abrupt("break",27);case 16:return e.next=18,u.a.asyncFunc((function(){return Object(S.a)(s)}));case 18:if(h=e.sent,f=Object(i.a)(h,2),m=f[0],p=f[1],!m){e.next=25;break}return a.$toast.fail(j.SERVER_ERROR),e.abrupt("return");case 25:a.formatSinger(p);case 26:return e.abrupt("break",27);case 27:a.headerObj.opacity=0,a.isLoadingShow=!1;case 29:case"end":return e.stop()}}),e)})))()},formatPlaylist:function(t){var a=t.creator,e=t.name,i=t.playCount,n=t.coverImgUrl,s=t.description,r=t.tracks,c=t.id,l=this.data;l.banner={id:c,name:e,coverImgUrl:n,playCount:i,description:s,creator:a},l.list=r.map((function(t){var a=t.name;return{id:t.id,name:a,player:t.ar.map((function(t){return t.name})).join("、")}})),this.setCache(l)},formatSinger:function(t){var a=t.artist,e=a.name,i=a.id,n=a.picUrl,s=t.hotSongs,r=this.data;this.cache;r.banner={id:i,name:e,coverImgUrl:n},r.list=s.map((function(t){return{id:t.id,name:t.name,player:t.ar.map((function(t){return t.name})).join("、")}})),this.setCache(r)},setCache:function(t){var a=this.cache,e=this.type,i=this.id;a[e][i]=t}}},L=Object(c.a)(O,(function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"container"},[a("ListHeader",{staticClass:"bd-0 white",style:{backgroundColor:"rgba(44, 44, 44, "+this.headerObj.opacity+")"},attrs:{title:this.headerObj.title}}),this.isLoadingShow?a("Loading"):a("ListContent",{attrs:{headerObj:this.headerObj,data:this.data}})],1)}),[],!1,null,null,null);a.default=L.exports},"46b8":function(t,a,e){"use strict";e("ac6a")},"629a":function(t,a,e){"use strict";e("c43f")},"6e96":function(t,a,e){"use strict";e("7997")},7997:function(t,a,e){},"7f5c":function(t,a,e){"use strict";e.d(a,"b",(function(){return s})),e.d(a,"a",(function(){return r}));var i=e("b775"),n=e("da71"),s=function(){return Object(i.a)({url:n.a.ARTISTS_LIST_GET,method:"get"})},r=function(t){return Object(i.a)({url:n.a.ARTISTS_DETAIL_GET,method:"get",params:{id:t}})}},ac6a:function(t,a,e){},bd00:function(t,a,e){"use strict";var i=e("5530"),n=e("2f62"),s=(e("a9e3"),{name:"SongListSub",props:{item:Object,idx:Number,id:Number}}),r=(e("629a"),e("2877")),c=Object(r.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"item bd-t",class:{current:t.item.id==t.id},attrs:{"data-id":t.item.id}},[e("div",{staticClass:"cell"},[e("span",{staticClass:"num"},[t._v(t._s(t.idx+1))]),e("van-icon",{attrs:{"class-prefix":"icon music iconfont icon-music",name:"extra"}})],1),e("div",{staticClass:"info"},[e("span",{staticClass:"name"},[t._v(t._s(t.item.name))]),e("span",{staticClass:"player"},[t._v(t._s(t.item.player))])]),e("span",{staticClass:"like-o"})])}),[],!1,null,"62dbbf7a",null).exports,l=e("b893"),o={name:"SongList",components:{Sub:c},props:{field:{type:String,default:""},list:Array,artist:Object},computed:Object(i.a)({},Object(n.c)("music",["music"])),methods:{onSongListItemClick:function(t){var a=this.field,e=this.artist,i=this.list,n=this.$bus,s=t.target,r=l.a.findItem(s).dataset.id;n.$emit("handleMusic",{id:r,artist:e,type:a,playings:"historys"===a?"":i})}}},u=Object(r.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"list-wrap",class:[t.field]},[e("ul",{staticClass:"list",on:{click:t.onSongListItemClick}},t._l(t.list,(function(a,i){return e("Sub",{key:i,attrs:{item:a,idx:i,id:t.music.id}})})),1)])}),[],!1,null,null,null);a.a=u.exports},c43f:function(t,a,e){},d07a:function(t,a,e){"use strict";var i={name:"Toplist",props:{title:String}},n=(e("6e96"),e("2877")),s=Object(n.a)(i,(function(){var t=this,a=t.$createElement;return(t._self._c||a)("van-nav-bar",{staticClass:"header",attrs:{title:t.title,"left-arrow":""},on:{"click-left":function(a){return t.$router.go(-1)}}},[t._t("default",null,{slot:"title"})],2)}),[],!1,null,"575dd905",null);a.a=s.exports},e7bd:function(t,a,e){"use strict";var i=e("1fba"),n=(e("b893"),{name:"Scroll",props:{scrollAction:Function,isScrollToTop:Boolean},mounted:function(){this.initBS()},methods:{initBS:function(){var t=this;this.$nextTick((function(){t.scroll=new i.a(t.$refs.wrap,{probeType:3,click:!0}),t.scroll.refresh(),t.scrollAction&&t.scroll.on("scroll",t.scrollAction)}))}},deactivated:function(){this.isScrollToTop&&this.scroll.scrollTo(0,0)}}),s=e("2877"),r=Object(s.a)(n,(function(){var t=this.$createElement,a=this._self._c||t;return a("div",{ref:"wrap",staticClass:"scroll-wrap pos-abs"},[a("div",{staticClass:"scroll-content"},[this._t("default")],2)])}),[],!1,null,null,null);a.a=r.exports},ff39:function(t,a,e){"use strict";e("1102")}}]);
//# sourceMappingURL=chunk-f8bec584.5efd5d52.js.map