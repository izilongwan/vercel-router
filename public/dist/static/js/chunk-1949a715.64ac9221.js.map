{"version":3,"sources":["webpack:///./src/views/Login.vue?6014","webpack:///./src/views/Login.vue?c072","webpack:///./src/components/Login/Header/index.vue?cccf","webpack:///src/components/Login/Header/index.vue","webpack:///./src/components/Login/Header/index.vue","webpack:///./src/components/Login/Header/index.vue?0267","webpack:///./src/components/Login/Form/index.vue?4d2f","webpack:///src/components/Login/Form/index.vue","webpack:///./src/views/Login.vue?09c2","webpack:///src/views/Login.vue","webpack:///./src/components/Login/Form/index.vue","webpack:///./src/components/Login/Form/index.vue?04f3","webpack:///./src/views/Login.vue","webpack:///./src/api/user.js"],"names":["name","_h","this","$createElement","_self","_c","attrs","data","isLoading","phone","password","rules","val","trim","len","test","activated","resetForm","methods","$refs","form","resetValidation","components","LoginHeader","LoginForm","_vm","ref","staticClass","on","onSubmit","model","value","callback","$$v","expression","staticStyle","_v","userRegister","request","url","API","USER_REGISTER","method","userLogin","USER_LOGIN","userCaptchaSend","USER_CAPTCHA_SEND","params","userCaptchaVerify","captcha","USER_CAPTCHA_VERIFY"],"mappings":"4GAAA,W,yCCAA,ICA6W,ECQ7W,CACEA,KAAM,e,YCSO,EAXC,YACd,GCRW,WAAa,IAAiBC,EAATC,KAAgBC,eAAuC,OAAvDD,KAA0CE,MAAMC,IAAIJ,GAAa,cAAc,CAACK,MAAM,CAAC,YAAY,UAC/G,IDUpB,EACA,KACA,KACA,M,8HEd2W,EC8C7W,CACEC,KADF,WA0BI,MAAO,CACLC,WAAW,EACXC,MAAO,GACPC,SAAU,GACVC,MAAO,CACLD,SAAU,CAClB,CAAU,UAAV,EAAU,QAAV,SACA,CAAU,UAhBV,YAEM,GADAE,EAAMA,EAAIC,OACD,CACP,IAAR,WACQ,OAAOC,GAAO,GAAKA,GAAO,GAE5B,OAAO,GAUH,QAAV,eAEQL,MAAO,CACf,CAAU,UAAV,EAAU,QAAV,UACA,CAAU,UAnCV,YAEM,SADAG,EAAMA,EAAIC,SAGO,KADvB,UAgCU,QAAV,YACA,CAAU,UA3BV,YACMD,EAAMA,EAAIC,OAEV,MADN,gBACiBE,KAAKH,IAwBZ,QAAV,cAMEI,UA5CF,WA6CId,KAAKe,aAGPC,QAAS,OAAX,IAAW,CAAX,2BACA,iCACA,uCAFA,IAII,SAJJ,SAIA,gLACA,eADA,SAGA,eACA,oCAJA,sCAGA,EAHA,KAGA,EAHA,MAOA,EAPA,wBAQA,8BARA,2BAYA,6BAEA,aACA,wDACA,iCAEA,UACA,qBACA,iBAGA,eAvBA,+CA0BI,QA9BJ,SA8BA,2KACA,EADA,iCAEA,aAFA,uBAIA,mBAJA,sCAIA,EAJA,KAIA,EAJA,MAMA,EANA,wBAOA,8BAPA,+BAWA,EAXA,wBAYA,8BAZA,2BAgBA,wBAEA,yBAlBA,+CAsBID,UApDJ,WAqDMf,KAAKO,MAAQ,GACbP,KAAKQ,SAAW,GAChBR,KAAKiB,MAAMC,KAAKC,sBCrJyT,ECY/U,CACErB,KAAM,QACNsB,WAAY,CACVC,YAAJ,EACIC,UCTY,YACd,GCRW,WAAa,IAAIC,EAAIvB,KAASD,EAAGwB,EAAItB,eAAmBE,EAAGoB,EAAIrB,MAAMC,IAAIJ,EAAG,OAAOI,EAAG,WAAW,CAACqB,IAAI,OAAOC,YAAY,OAAOC,GAAG,CAAC,OAASH,EAAII,WAAW,CAACxB,EAAG,YAAY,CAACC,MAAM,CAAC,YAAY,UAAU,KAAO,QAAQ,MAAQ,KAAK,UAAY,KAAK,YAAc,SAAS,UAAY,GAAG,UAAY,GAAG,MAAQmB,EAAId,MAAMF,OAAOqB,MAAM,CAACC,MAAON,EAAS,MAAEO,SAAS,SAAUC,GAAMR,EAAIhB,MAAMwB,GAAKC,WAAW,WAAW7B,EAAG,YAAY,CAACC,MAAM,CAAC,YAAY,aAAa,KAAO,WAAW,UAAY,KAAK,UAAY,GAAG,UAAY,GAAG,KAAO,WAAW,MAAQ,KAAK,YAAc,QAAQ,MAAQmB,EAAId,MAAMD,UAAUoB,MAAM,CAACC,MAAON,EAAY,SAAEO,SAAS,SAAUC,GAAMR,EAAIf,SAASuB,GAAKC,WAAW,cAAc7B,EAAG,MAAM,CAAC8B,YAAY,CAAC,OAAS,SAAS,CAAC9B,EAAG,aAAa,CAACC,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,QAAUmB,EAAIjB,UAAU,MAAQ,8CAA8C,cAAc,WAAW,CAACiB,EAAIW,GAAG,UAAU,IAAI,KAC14B,IDUpB,EACA,KACA,KACA,M,UENE,G,UAAY,YACd,GXTW,WAAa,IAAiBnC,EAATC,KAAgBC,eAAmBE,EAAnCH,KAA0CE,MAAMC,IAAIJ,EAAG,OAAOI,EAAG,MAAM,CAACsB,YAAY,aAAa,CAACtB,EAAG,eAAeA,EAAG,cAAc,KACjJ,IWWpB,EACA,KACA,WACA,OAIa,Y,2CCnBf,oKAGagC,EAAe,SAAC9B,GAAD,OAC1B+B,YAAQ,CACNC,IAAKC,IAAIC,cACTC,OAAQ,OACRnC,UAGSoC,EAAY,SAACpC,GAAD,OACvB+B,YAAQ,CACNC,IAAKC,IAAII,WACTF,OAAQ,OACRnC,UAGSsC,EAAkB,SAACpC,GAAD,OAC7B6B,YAAQ,CACNC,IAAKC,IAAIM,kBACTJ,OAAQ,MACRK,OAAQ,CAAEtC,YAGDuC,EAAoB,SAAC,GAAD,IAAGvC,EAAH,EAAGA,MAAOwC,EAAV,EAAUA,QAAV,OAC/BX,YAAQ,CACNC,IAAKC,IAAIU,oBACTR,OAAQ,MACRK,OAAQ,CAAEtC,QAAOwC,e","file":"static/js/chunk-1949a715.64ac9221.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=4dea7d98&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('LoginHeader'),_c('LoginForm')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <van-nav-bar\n    left-text=\"注册\"\n  />\n  <!-- @click-left=\"() => $router.push('register')\" -->\n</template>\n\n<script>\nexport default {\n  name: 'LoginHeader'\n}\n</script>\n\n<style>\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=213f8bb2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-nav-bar',{attrs:{\"left-text\":\"注册\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <van-form ref=\"form\" class=\"form\" @submit=\"onSubmit\">\n    <van-field\n      left-icon=\"phone-o\"\n      v-model=\"phone\"\n      name=\"phone\"\n      label=\"手机\"\n      maxlength=\"11\"\n      placeholder=\"请输入手机号\"\n      clickable\n      clearable\n      :rules=\"rules.phone\"\n    />\n\n    <van-field\n      left-icon=\"closed-eye\"\n      v-model=\"password\"\n      type=\"password\"\n      maxlength=\"20\"\n      clearable\n      clickable\n      name=\"password\"\n      label=\"密码\"\n      placeholder=\"请输入密码\"\n      :rules=\"rules.password\"\n    />\n\n    <div style=\"margin: 16px;\">\n      <van-button\n        round\n        block\n        :loading=\"isLoading\"\n        color=\"linear-gradient(to right, #4bb0ff, #6149f6)\"\n        native-type=\"submit\"\n      >登 录</van-button>\n    </div>\n  </van-form>\n</template>\n\n<script>\nimport { userLogin } from 'api/user'\nimport { TOKEN_NAME, SERVER_ERROR } from '@/config'\nimport tools from 'utils/tools'\nimport { musicCollectionGet } from 'api/collection'\nimport { mapState, mapActions } from 'vuex'\n\nexport default {\n  data () {\n    const validatePhoneLen = (val) => {\n      val = val.trim();\n      if (val) {\n        const len = val.length;\n        return len === 11;\n      }\n      return false;\n    }\n\n    const validatePhoneValid = (val) => {\n      val = val.trim();\n      const reg = /^1[3-9]\\d{9}$/\n      return reg.test(val);\n    }\n\n    const validatePasswordLen = (val) => {\n      val = val.trim();\n      if (val) {\n        const len = val.length;\n        return len >= 6 && len <= 20\n      }\n      return false;\n    }\n\n    return {\n      isLoading: false,\n      phone: '',\n      password: '',\n      rules: {\n        password: [\n          { required: true, message: '请填写密码' },\n          { validator: validatePasswordLen, message: '密码长度为6-20位' }\n        ],\n        phone: [\n          { required: true, message: '请填写手机号' },\n          { validator: validatePhoneLen, message: '手机为11位数字' },\n          { validator: validatePhoneValid, message: '手机号不合法' }\n        ],\n      }\n    };\n  },\n\n  activated () {\n    this.resetForm();\n  },\n\n  methods: {\n    ...mapActions('user', ['SetUser']),\n    ...mapActions('music', ['SetMusicList']),\n\n    async onSubmit (values) {\n      this.isLoading = true;\n\n      const [err, result] = await tools.asyncFunc(\n        () => userLogin(values)\n      )\n\n      if (err) {\n        this.$toast.fail(SERVER_ERROR);\n        return;\n      }\n\n      const { code, profile, msg } = result;\n\n      this.getData(profile);\n      profile && localStorage.setItem(TOKEN_NAME, JSON.stringify(profile));\n      code === 200 && this.$router.push('recom');\n\n      this.$toast({\n        message: msg || 'success',\n        position: 'top'\n      })\n\n      this.isLoading = false;\n    },\n\n    async getData (profile) {\n      if (profile) {\n        await this.SetUser(profile);\n\n        const [err, result] = await tools.asyncFunc(musicCollectionGet);\n\n        if (err) {\n          this.$toast.fail(SERVER_ERROR);\n          return;\n        }\n\n        if (err) {\n          this.$toast.fail(SERVER_ERROR);\n          return;\n        }\n\n        const { msg, code, data } = result;\n\n        code === 0 && this.SetMusicList(data);\n      }\n    },\n\n    resetForm () {\n      this.phone = '';\n      this.password = '';\n      this.$refs.form.resetValidation();\n    }\n  },\n\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"container\">\n    <LoginHeader />\n\n    <LoginForm />\n  </div>\n</template>\n\n<script>\nimport LoginHeader from 'components/Login/Header';\nimport LoginForm from 'components/Login/Form';\n\nexport default {\n  name: 'Login',\n  components: {\n    LoginHeader,\n    LoginForm\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.container {\n  z-index: 10;\n  background-color: #fff;\n}\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=74d2b7ce&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-form',{ref:\"form\",staticClass:\"form\",on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"left-icon\":\"phone-o\",\"name\":\"phone\",\"label\":\"手机\",\"maxlength\":\"11\",\"placeholder\":\"请输入手机号\",\"clickable\":\"\",\"clearable\":\"\",\"rules\":_vm.rules.phone},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_c('van-field',{attrs:{\"left-icon\":\"closed-eye\",\"type\":\"password\",\"maxlength\":\"20\",\"clearable\":\"\",\"clickable\":\"\",\"name\":\"password\",\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"rules\":_vm.rules.password},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"loading\":_vm.isLoading,\"color\":\"linear-gradient(to right, #4bb0ff, #6149f6)\",\"native-type\":\"submit\"}},[_vm._v(\"登 录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=4dea7d98&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=4dea7d98&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dea7d98\",\n  null\n  \n)\n\nexport default component.exports","import request from 'utils/request';\nimport API from './config';\n\nexport const userRegister = (data) =>\n  request({\n    url: API.USER_REGISTER,\n    method: 'post',\n    data\n  });\n\nexport const userLogin = (data) =>\n  request({\n    url: API.USER_LOGIN,\n    method: 'post',\n    data\n  });\n\nexport const userCaptchaSend = (phone) =>\n  request({\n    url: API.USER_CAPTCHA_SEND,\n    method: 'get',\n    params: { phone }\n  });\n\nexport const userCaptchaVerify = ({ phone, captcha }) =>\n  request({\n    url: API.USER_CAPTCHA_VERIFY,\n    method: 'get',\n    params: { phone, captcha }\n  });\n"],"sourceRoot":""}