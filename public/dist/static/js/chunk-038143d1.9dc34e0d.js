(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-038143d1"],{1346:function(e,t,n){},"5a50":function(e,t,n){"use strict";n("1346")},"73cf":function(e,t,n){"use strict";n.r(t);var a={name:"RegisterHeader"},r=n("2877"),s=Object(r.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("van-nav-bar",{attrs:{"right-text":"登录"},on:{"click-right":function(){return e.$router.push("login")}}})}),[],!1,null,null,null).exports,c=n("3835"),i=n("1da1"),o=(n("96cf"),n("498a"),n("c24f")),u=n("b893"),l=n("f121"),p={data:function(){return{isCaptchaLoading:!1,isRegisterLoading:!1,phone:"",password:"",nickname:"",captcha:"",rules:{nickname:[{required:!0,message:"请填写昵称"},{validator:function(e){if(e=e.trim()){var t=e.length;return t>=3&&t<=20}return!1},message:"昵称长度为3-20位"}],password:[{required:!0,message:"请填写密码"},{validator:function(e){if(e=e.trim()){var t=e.length;return t>=6&&t<=20}return!1},message:"密码长度为6-20位"}],phone:[{required:!0,message:"请填写手机号"},{validator:function(e){return u.a.checkPhone(e)},message:"请输入正确的手机"}],captcha:[{required:!0,message:"请填写手机验证码"},{validator:function(e){if(e=e.trim()){return 4===e.length&&/^\d{4}$/.test(e)}return!1},message:"验证码为4位数字"}]}}},computed:{sendBtnDisabled:function(){return!u.a.checkPhone(this.phone)}},activated:function(){this.resetForm()},methods:{submitForm:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n,a,r,s,i,p,d,f,h,m,b,g,v,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isRegisterLoading=!0,n=e.nickname,a=e.password,r=e.phone,s=e.captcha,i={nickname:n,password:a,phone:r,captcha:s},t.next=5,u.a.asyncFunc((function(){return Object(o.b)(i)}));case 5:if(p=t.sent,d=Object(c.a)(p,2),f=d[0],d[1],!f){t.next=13;break}return e.isRegisterLoading=!1,e.$toast({position:"top",message:"验证码不正确"}),t.abrupt("return");case 13:return t.next=15,u.a.asyncFunc((function(){return Object(o.d)(i)}));case 15:if(h=t.sent,m=Object(c.a)(h,2),b=m[0],g=m[1],v=g.code,k=g.msg,!b){t.next=24;break}return e.$toast.fail(l.SERVER_ERROR),t.abrupt("return");case 24:0===v&&e.$router.push("login"),e.$toast({position:"top",message:k}),e.isRegisterLoading=!1;case 27:case"end":return t.stop()}}),t)})))()},onCaptchaSend:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var a,r,s,i,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isCaptchaLoading=!0,n.next=3,u.a.asyncFunc((function(){return Object(o.a)(e)}));case 3:if(a=n.sent,r=Object(c.a)(a,2),s=r[0],i=r[1],!s){n.next=10;break}return t.$toast.fail(l.SERVER_ERROR),n.abrupt("return");case 10:p=i.code,i.msg,200===p&&t.$toast({position:"top",message:"验证码已发送"}),t.isCaptchaLoading=!1;case 13:case"end":return n.stop()}}),n)})))()},resetForm:function(){this.phone="",this.password="",this.nickname="",this.captcha="",this.$refs.form.resetValidation()}}},d={name:"Register",components:{RegisterHeader:s,RegisterForm:Object(r.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-form",{ref:"form"},[n("van-field",{attrs:{"left-icon":"fire-o",name:"nickname",label:"昵称",maxlength:"20",placeholder:"如：我又不乱来",clickable:"",clearable:"",rules:e.rules.nickname},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),n("van-field",{attrs:{"left-icon":"phone-o",name:"phone",label:"手机",maxlength:"30",placeholder:"手机号 11位数字",clickable:"",clearable:"",rules:e.rules.phone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),n("van-field",{attrs:{"left-icon":"smile-o",maxlength:"4",clearable:"",clickable:"",name:"captcha",label:"验证",placeholder:"短信验证码",rules:e.rules.captcha},model:{value:e.captcha,callback:function(t){e.captcha=t},expression:"captcha"}},[n("van-button",{attrs:{slot:"button",size:"small",loading:e.isCaptchaLoading,color:"linear-gradient(to right, #4bb0ff, #6149f6)",type:"primary",disabled:e.sendBtnDisabled},on:{click:function(t){return e.onCaptchaSend(e.phone)}},slot:"button"},[e._v("发送验证码")])],1),n("van-field",{attrs:{maxlength:"20","left-icon":"closed-eye",type:"password",name:"password",label:"密码",placeholder:"如：******",clickable:"",clearable:"",rules:e.rules.password},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",loading:e.isRegisterLoading,color:"linear-gradient(to right, #4bb0ff, #6149f6)","native-type":"submit"},on:{click:e.submitForm}},[e._v("注 册")])],1)],1)}),[],!1,null,null,null).exports}},f=(n("5a50"),Object(r.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("RegisterHeader"),t("div",{staticClass:"form"},[t("RegisterForm")],1)],1)}),[],!1,null,"5aebbb1e",null));t.default=f.exports},c24f:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n("b775"),r=n("da71"),s=function(e){return Object(a.a)({url:r.a.USER_REGISTER,method:"post",data:e})},c=function(e){return Object(a.a)({url:r.a.USER_LOGIN,method:"post",data:e})},i=function(e){return Object(a.a)({url:r.a.USER_CAPTCHA_SEND,method:"get",params:{phone:e}})},o=function(e){var t=e.phone,n=e.captcha;return Object(a.a)({url:r.a.USER_CAPTCHA_VERIFY,method:"get",params:{phone:t,captcha:n}})}}}]);
//# sourceMappingURL=chunk-038143d1.9dc34e0d.js.map